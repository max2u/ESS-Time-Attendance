/*! senate-timesheets - v - 2014-04-24 *//*! Login Page */
var essApp=angular.module("ess");essApp.controller("LoginController",["$scope","$http","$window","appProps",function(a,b,c,d){a.credentials={username:"",password:"",rememberMe:!1},a.activeView=1,a.showError=!1,a.errorFields={username:!1,password:!1,reset:function(){this.username=!1,this.password=!1}},a.errorMessage="",a.loginInProgress=!1,a.isActiveView=function(a){return this.activeView===a},a.setActiveView=function(a){this.activeView=a},a.validate=function(){if(this.errorFields.reset(),this.showError=!1,this.credentials.username){if(this.credentials.password)return!0;this.errorMessage="Please enter your password.",this.errorFields.password=!0}else this.errorMessage="Please enter your username.",this.errorFields.username=!0;return this.showError=!0,!1},a.login=function(){if(a.validate()){var e=d.ctxPath+d.loginUrl,f=$.param(a.credentials),g={headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}};a.loginInProgress=!0,b.post(e,f,g).success(function(b){b&&(b.authenticated===!0?c.location.href=b.redirectUrl:(a.errorMessage=b.message,a.showError=!0,"UNKNOWN_ACCOUNT"==b.status?a.errorFields.username=!0:"INCORRECT_CREDENTIALS"==b.status&&(a.errorFields.password=!0),a.loginInProgress=!1))}).error(function(){a.loginInProgress=!1})}}}]);